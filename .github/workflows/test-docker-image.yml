name: amelia build
on: [workflow_dispatch]
jobs:
  build:
    name: build
    runs-on: self-hosted
    steps:
    - uses: actions/checkout@v3    
    - name: Build the Docker image
      run: |
        docker login -u marcin.knapik@ocean.ibm.com -p sha256~ELOAf1B-AUz3UOVAGl2nTNV0in9kTBq4JVtYYXCrGik default-route-openshift-image-registry.apps.cloud.waw.pl.gsni.kyndryl.net
        export AML_IMAGE_TAG=0.0.0.5
        export AML_REPOSITORY=default-route-openshift-image-registry.apps.cloud.waw.pl.gsni.kyndryl.net/aml
        export AML_PROJECT_PATH=/home/marcin/gsni-okd/amelia
        /home/marcin/gsni-okd/amelia-images-build.sh
        unset AML_IMAGE_TAG AML_REPOSITORY AML_PROJECT_PATH
